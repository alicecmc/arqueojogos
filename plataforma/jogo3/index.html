<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desvende o sÃ­tio</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        .zoom-container {
            overflow: hidden;
            border-radius: 12px;
            border: 4px solid #4a3425;
            width: 100%;
            max-height: 80vh;
            cursor: grab;
            position: relative;
        }

        .zoom-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.1s ease;
            transform-origin: center center;
            user-select: none;
            pointer-events: none;
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: #2b1d14;
            color: #f5e6cc;
            overflow-x: hidden;
        }

        /* TOPO */

        .top-bar {
            position: absolute;
            top: 0;
            width: 100%;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            background: #3a281c;
        }

        /* LAYOUT PRINCIPAL */

        .container {
            height: 100vh;
            display: flex;
            padding: 100px 40px 40px 40px;
            gap: 40px;
        }

        .left {
            flex: 2;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .right {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #map {
            height: 250px;
            border-radius: 12px;
            border: 3px solid #4a3425;
        }

        .slider-box {
            background: #4a3425;
            padding: 20px;
            border-radius: 12px;
        }

        #anoValor {
            font-size: 26px;
            margin-bottom: 10px;
            color: #d6b98c;
            font-weight: 600;
        }

        /* Era label badge */
        .era-badge {
            display: inline-block;
            font-size: 12px;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 20px;
            margin-left: 8px;
            vertical-align: middle;
        }

        .era-ac {
            background: #7a4a2a;
            color: #f5c07a;
        }

        .era-dc {
            background: #2a5a3a;
            color: #a0e8b0;
        }

        /* Timeline com marcador central */
        .timeline-wrap {
            position: relative;
            margin-top: 8px;
        }

        .timeline-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #c9a97f;
            margin-bottom: 4px;
        }

        .timeline-center-mark {
            position: absolute;
            bottom: 0;
            width: 2px;
            height: 8px;
            background: #d6b98c88;
            pointer-events: none;
            border-radius: 2px;
        }

        .timeline-center-label {
            position: absolute;
            top: 0;
            font-size: 10px;
            color: #d6b98c99;
            white-space: nowrap;
            transform: translateX(-50%);
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #7a4a2a 0%, #7a4a2a 82.9%, #2a5a3a 82.9%, #2a5a3a 100%);
            border-radius: 5px;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #d6b98c;
            cursor: pointer;
            border: 2px solid #2b1d14;
            box-shadow: 0 0 6px #00000066;
        }

        button {
            padding: 16px;
            border: none;
            border-radius: 10px;
            background: #a8743a;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: #c08b4d;
        }

        /* OVERLAY RESULTADO */

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #2b1d14;
            display: none;
            z-index: 1000;
            overflow-y: auto;
            padding: 40px;
        }

        .result-map {
            width: 100%;
            height: 450px;
            border-radius: 12px;
            border: 3px solid #4a3425;
            margin-bottom: 30px;
        }

        .result-middle {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .result-text {
            flex: 1;
            min-width: 300px;
            background: #3a281c;
            padding: 25px;
            border-radius: 12px;
        }

        .result-images {
            flex: 1;
            min-width: 300px;
            display: flex;
            gap: 20px;
        }








        .result-images img {
            width: 50%;
            height: 350px;
            object-fit: cover;
            border-radius: 12px;
            border: 3px solid #4a3425;
        }

        .result-bottom {
            background: #4a3425;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .ano-real {
            font-size: 38px;
            font-weight: 700;
            color: #d6b98c;
        }

        .ano-diff,
        .distancia-real {
            font-size: 14px;
            color: #c9a97f;
        }

        .local-real {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .linha {
            margin-bottom: 20px;
        }

        .finalTela {
            display: none;
            height: 100vh;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
    </style>
</head>

<body>

    <div class="top-bar">
        <div>Rodada <span id="roundAtual">1</span>/5</div>
        <div>PontuaÃ§Ã£o: <span id="pontuacaoTotal">0</span></div>
    </div>

    <div class="container">
        <div class="left">
            <div class="zoom-container">
                <img id="imagemSite">
            </div>
        </div>

        <div class="right">
            <div id="map"></div>

            <div class="slider-box">
                <h3>ANO EM QUE FOI ERGUIDO
                    <span class="era-badge" id="eraBadge">d.C.</span>
                </h3>
                <div id="anoValor">1900 d.C.</div>

                <div class="timeline-wrap">
                    <div class="timeline-labels">
                        <span>10000 a.C.</span>
                        <span>2026 d.C.</span>
                    </div>
                    <!-- O slider usa valores de -10000 a 2026. Valor 0 = ano 1 d.C. -->
                    <div style="position:relative; padding-top:20px;">
                        <span class="timeline-center-label" id="zeroCenterLabel">ano 0</span>
                        <div class="timeline-center-mark" id="zeroCenterMark"></div>
                        <input type="range" id="anoSlider" min="-10000" max="2026" value="1900">
                    </div>
                </div>
            </div>

            <button onclick="confirmarResposta()">Confirmar</button>
        </div>
    </div>

    <div class="overlay" id="overlayResultado">

        <div id="miniMap" class="result-map"></div>

        <div class="result-middle">

            <div class="result-text">

                <h2 id="tituloResultado"></h2>

                <div class="linha">
                    ğŸ“…
                    <div class="ano-real" id="anoReal"></div>
                    <div class="ano-diff" id="anoDiff"></div>
                </div>

                <div class="linha">
                    ğŸ“
                    <div class="local-real" id="localReal"></div>
                    <div class="distancia-real" id="distanciaReal"></div>
                </div>

            </div>

            <div class="result-images">
                <img id="imgHistorica">
                <img id="imgAtual">
            </div>

        </div>

        <div class="result-bottom">
            <h3>Contexto HistÃ³rico</h3>
            <p id="descricaoResultado"></p>

            <h3>Impacto Atual</h3>
            <p id="impactoResultado"></p>

            <button onclick="proximaRodada()">Continuar</button>
        </div>

    </div>

    <div class="finalTela" id="finalTela">
        <h1>ExploraÃ§Ã£o Finalizada</h1>
        <h2>PontuaÃ§Ã£o Final: <span id="finalScore"></span></h2>
        <button onclick="location.reload()">Jogar novamente</button>
    </div>

    <script>

        // â”€â”€â”€ UTILITÃRIOS DE EXIBIÃ‡ÃƒO DE ANO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // O slider usa valores inteiros onde:
        //   valor < 0  â†’ ano a.C. (ex: -500 = 500 a.C.)
        //   valor >= 0 â†’ ano d.C. (ex: 2026 = 2026 d.C.)
        // O "ano 0" no slider representa a transiÃ§Ã£o a.C./d.C.

        function formatarAno(valor) {
            valor = parseInt(valor);
            if (valor < 0) {
                return `${Math.abs(valor)} a.C.`;
            } else {
                return `${valor} d.C.`;
            }
        }

        function getEra(valor) {
            return parseInt(valor) < 0 ? "a.C." : "d.C.";
        }

        // DistÃ¢ncia em anos entre dois valores do slider (pode cruzar o zero)
        function diffAnos(v1, v2) {
            return Math.abs(parseInt(v1) - parseInt(v2));
        }

        // â”€â”€â”€ DADOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

        const sitios = [
            {
                nome: "Tumba de Mereruka - Saqqara, Egito",
                imagem: "assets/tumba_antiga.jpg",
                imagemAtual: "assets/tumba_atual.jpg",
                lat: 29.8711,
                lng: 31.2165,
                ano: -2340,
                descricao: "Localizada na necrÃ³pole de Saqqara, a tumba de Mereruka data do sÃ©culo XXIII a.C., durante a 6Âª Dinastia do Antigo ImpÃ©rio EgÃ­pcio. Mereruka foi vizir do faraÃ³ Teti e uma das figuras mais influentes de seu tempo. O complexo funerÃ¡rio possui dezenas de cÃ¢maras decoradas com relevos que retratam cenas da vida cotidiana, atividades agrÃ­colas, cerimÃ´nias religiosas e a estrutura administrativa do Egito Antigo.",
                impactoAtual: "Ao longo dos sÃ©culos, a tumba sofreu com saqueadores em busca de objetos valiosos. Em perÃ­odos mais recentes, atos de vandalismo deixaram inscriÃ§Ãµes modernas e danos aos relevos esculpidos nas paredes. Cada dano representa a perda irreversÃ­vel de informaÃ§Ãµes histÃ³ricas e culturais fundamentais para o entendimento do Egito Antigo."
            },
            {
                nome: "Stonehenge - Wiltshire, Inglaterra",
                imagem: "assets/stonehenge_antiga.jpg",
                imagemAtual: "assets/stonehenge_atual.jpg",
                lat: 51.1789,
                lng: -1.8262,
                ano: -3000, // c. 3000 a.C.
                descricao: "Erguido entre 3000 e 1500 a.C. na planÃ­cie de Salisbury, Stonehenge Ã© um dos monumentos megalÃ­ticos mais famosos do mundo. Suas pedras, algumas pesando atÃ© 25 toneladas, foram transportadas de centenas de quilÃ´metros de distÃ¢ncia. O sÃ­tio estÃ¡ alinhado astronomicamente com os solstÃ­cios e demonstra o avanÃ§ado conhecimento de engenharia e astronomia das civilizaÃ§Ãµes prÃ©-histÃ³ricas.",
                impactoAtual: "Ao longo do sÃ©culo XX, turistas escalavam e tocavam as pedras livremente, causando desgaste na superfÃ­cie. GravaÃ§Ãµes de nomes e sÃ­mbolos foram encontradas nas pedras. Hoje o acesso direto Ã© proibido, mas a pressÃ£o do turismo em massa â€” mais de 1 milhÃ£o de visitantes por ano â€” continua a ameaÃ§ar o solo e a estrutura subterrÃ¢nea do sÃ­tio."
            },
            {
                nome: "Machu Picchu - Cusco, Peru",
                imagem: "assets/machu_picchu_antiga.jpg",
                imagemAtual: "assets/machu_picchu_atual.jpg",
                lat: -13.1631,
                lng: -72.5450,
                ano: 1450, // c. 1450 d.C.
                descricao: "ConstruÃ­da pelos incas por volta de 1450 d.C. a 2.430 metros de altitude nos Andes peruanos, Machu Picchu foi 'redescoberta' pelo explorador Hiram Bingham em 1911. A cidade demonstra tÃ©cnicas de engenharia avanÃ§adÃ­ssimas: blocos de pedra encaixados sem argamassa resistiram a sÃ©culos de terremotos. Foi declarada PatrimÃ´nio Mundial da UNESCO em 1983.",
                impactoAtual: "O turismo massivo â€” que chegou a mais de 1,5 milhÃ£o de visitantes por ano â€” causou erosÃ£o nas trilhas, deslizamentos de terra e danos Ã s estruturas. Turistas foram flagrados realizando pichaÃ§Ãµes, quebra de peÃ§as e atÃ© defecando dentro do sÃ­tio. Em 2023, o Peru reduziu drasticamente a capacidade diÃ¡ria de visitantes para tentar reverter os danos."
            },
            {
                nome: "Grande Muralha da China - Badaling, China",
                imagem: "assets/muralha_china_antiga.jpg",
                imagemAtual: "assets/muralha_china_atual.jpg",
                lat: 40.3588,
                lng: 116.0153,
                ano: -221, // construÃ§Ã£o unificada iniciada 221 a.C.
                descricao: "A construÃ§Ã£o da Grande Muralha comeÃ§ou no sÃ©culo III a.C. sob o imperador Qin Shi Huang e foi expandida por sÃ©culos, atingindo mais de 21.000 km de extensÃ£o total. ConstruÃ­da por centenas de milhares de trabalhadores â€” muitos deles prisioneiros de guerra â€” Ã© o maior projeto arquitetÃ´nico da histÃ³ria humana e sÃ­mbolo da civilizaÃ§Ã£o chinesa.",
                impactoAtual: "Durante sÃ©culos, tijolos da muralha foram retirados por moradores locais para construir casas e muros. Embora pareÃ§a um dano pequeno, cada tijolo removido enfraquece a estrutura e acelera o colapso de trechos inteiros.Mais grave ainda Ã© a perda arqueolÃ³gica: muitos desses tijolos carregam marcas de oficinas imperiais, inscriÃ§Ãµes e caracterÃ­sticas prÃ³prias de cada dinastia. Quando sÃ£o arrancados, perdem-se informaÃ§Ãµes valiosas sobre tÃ©cnicas de construÃ§Ã£o, organizaÃ§Ã£o militar e histÃ³ria regional.Estima-se que mais de 30% da muralha original jÃ¡ tenha desaparecido. Cada fragmento retirado nÃ£o Ã© apenas pedra â€” Ã© uma parte da memÃ³ria histÃ³rica que nÃ£o pode ser reconstruÃ­da."
            },
            {
                nome: "Museu Nacional do Iraque - BagdÃ¡, Iraque",
                imagem: "assets/iraque_antes.jpg",
                imagemAtual: "assets/iraque_saque.jpg",
                lat: 33.3152,
                lng: 44.3661,
                ano: 1926,
                descricao: "Fundado em 1926, o Museu Nacional do Iraque abrigava uma das mais importantes coleÃ§Ãµes da MesopotÃ¢mia, incluindo artefatos sumÃ©rios, babilÃ´nicos e assÃ­rios com mais de 5.000 anos de histÃ³ria.",
                impactoAtual: "Durante a invasÃ£o do Iraque em 2003, o museu foi saqueado e mais de 15.000 peÃ§as foram roubadas. Muitas foram recuperadas, mas milhares continuam desaparecidas no mercado ilegal de antiguidades. O caso se tornou um dos maiores exemplos modernos de perda de patrimÃ´nio arqueolÃ³gico."
            }
        ];

        let rodada = 0;
        let pontuacaoTotal = 0;
        let sitioAtual;
        let miniMap = null;

        // â”€â”€â”€ MAPA PRINCIPAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const map = L.map("map").setView([20, 0], 2);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

        let userLat = 20, userLng = 0;

        // marcador inicial
        let markerUser = L.marker([20, 0], { draggable: true }).addTo(map);

        // atualizar ao arrastar
        markerUser.on("dragend", () => {
            const pos = markerUser.getLatLng();
            userLat = pos.lat;
            userLng = pos.lng;
        });

        // NOVO: atualizar ao clicar no mapa
        map.on("click", function (e) {
            userLat = e.latlng.lat;
            userLng = e.latlng.lng;

            markerUser.setLatLng(e.latlng);
        });

        // â”€â”€â”€ SLIDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const slider = document.getElementById("anoSlider");
        const anoValorEl = document.getElementById("anoValor");
        const eraBadgeEl = document.getElementById("eraBadge");

        function atualizarSliderUI() {
            const val = parseInt(slider.value);
            anoValorEl.innerText = formatarAno(val);
            const era = getEra(val);
            eraBadgeEl.innerText = era;
            eraBadgeEl.className = "era-badge " + (val < 0 ? "era-ac" : "era-dc");
        }

        slider.oninput = atualizarSliderUI;
        atualizarSliderUI(); // inicializa

        // Posiciona o marcador "ano 0" corretamente proporcional ao range do slider
        (function posicionarMarcadorZero() {

            const pct = "81.7%";

            document.getElementById("zeroCenterMark").style.left = pct;
            document.getElementById("zeroCenterLabel").style.left = pct;

        })();

        // â”€â”€â”€ CÃLCULOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function calcularDistancia(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) ** 2 +
                Math.cos(lat1 * Math.PI / 180) *
                Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon / 2) ** 2;
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        // â”€â”€â”€ RODADAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function carregarRodada() {
            sitioAtual = sitios[rodada % sitios.length];
            document.getElementById("imagemSite").src = sitioAtual.imagem;
            document.getElementById("roundAtual").innerText = rodada + 1;

            markerUser.setLatLng([20, 0]);
            userLat = 20;
            userLng = 0;

            slider.value = 0;
            atualizarSliderUI();

            map.setView([20, 0], 2);
        }

        carregarRodada();

        // Ãcones personalizados
        const iconUser = L.icon({
            iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",
            shadowUrl: "https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png",
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        const iconCorrect = L.icon({
            iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png",
            shadowUrl: "https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png",
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        function confirmarResposta() {

            const distancia = calcularDistancia(userLat, userLng, sitioAtual.lat, sitioAtual.lng);
            const diff = diffAnos(slider.value, sitioAtual.ano);

            let pontos = Math.max(0, (1000 - distancia) + (500 - (diff * 5)));
            pontuacaoTotal += pontos;

            document.getElementById("pontuacaoTotal").innerText = Math.floor(pontuacaoTotal);

            document.getElementById("overlayResultado").style.display = "block";

            document.getElementById("imgHistorica").src = sitioAtual.imagem;
            document.getElementById("imgAtual").src = sitioAtual.imagemAtual;
            document.getElementById("tituloResultado").innerText = sitioAtual.nome;
            document.getElementById("anoReal").innerText = formatarAno(sitioAtual.ano);
            document.getElementById("anoDiff").innerText =
                `${diff} anos de diferenÃ§a Â· seu palpite: ${formatarAno(slider.value)}`;
            document.getElementById("localReal").innerText = sitioAtual.nome.toUpperCase();
            document.getElementById("distanciaReal").innerText =
                `${distancia.toFixed(0)} km de distÃ¢ncia`;
            document.getElementById("descricaoResultado").innerText = sitioAtual.descricao;
            document.getElementById("impactoResultado").innerText = sitioAtual.impactoAtual;

            // MINI MAPA
            if (miniMap) {
                miniMap.remove();
                miniMap = null;
            }

            miniMap = L.map("miniMap");
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(miniMap);

            const bounds = L.latLngBounds([
                [userLat, userLng],
                [sitioAtual.lat, sitioAtual.lng]
            ]);
            miniMap.fitBounds(bounds, { padding: [50, 50] });
            // marcador do jogador (vermelho)
            L.marker([userLat, userLng], { icon: iconUser }).addTo(miniMap);

            // marcador correto (verde)
            L.marker([sitioAtual.lat, sitioAtual.lng], { icon: iconCorrect }).addTo(miniMap);
            L.polyline([[userLat, userLng], [sitioAtual.lat, sitioAtual.lng]], { dashArray: "5,5" }).addTo(miniMap);
        }

        function proximaRodada() {
            document.getElementById("overlayResultado").style.display = "none";
            rodada++;

            if (rodada >= 5) {
                document.querySelector(".container").style.display = "none";
                document.querySelector(".top-bar").style.display = "none";
                document.getElementById("finalTela").style.display = "flex";
                document.getElementById("finalScore").innerText = Math.floor(pontuacaoTotal);
                return;
            }

            carregarRodada();
        }

        // â”€â”€â”€ ZOOM INTERATIVO NA IMAGEM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

        const zoomContainer = document.querySelector(".zoom-container");
        const zoomImage = document.getElementById("imagemSite");

        let scale = 1;
        let posX = 0;
        let posY = 0;
        let isDragging = false;
        let startX, startY;

        function atualizarTransform() {
            zoomImage.style.transform =
                `translate(${posX}px, ${posY}px) scale(${scale})`;
        }

        // Zoom com scroll
        zoomContainer.addEventListener("wheel", function (e) {
            e.preventDefault();

            const zoomSpeed = 0.1;

            if (e.deltaY < 0) {
                scale += zoomSpeed;
            } else {
                scale -= zoomSpeed;
            }

            scale = Math.min(Math.max(1, scale), 4); // limite 1x a 4x

            atualizarTransform();
        });

        // Arrastar imagem
        zoomContainer.addEventListener("mousedown", function (e) {
            if (scale <= 1) return;

            isDragging = true;
            startX = e.clientX - posX;
            startY = e.clientY - posY;
            zoomContainer.style.cursor = "grabbing";
        });

        window.addEventListener("mousemove", function (e) {
            if (!isDragging) return;

            posX = e.clientX - startX;
            posY = e.clientY - startY;

            atualizarTransform();
        });

        window.addEventListener("mouseup", function () {
            isDragging = false;
            zoomContainer.style.cursor = "grab";
        });

        // Duplo clique reseta
        zoomContainer.addEventListener("dblclick", function () {
            scale = 1;
            posX = 0;
            posY = 0;
            atualizarTransform();
        });

    </script>

</body>

</html>